<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Valores da Unidade - Medidor de Combust√£o</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <div class="config-device-container">
        <div class="header">
            <h1 class="config-device-title">üìä Valores da Unidade</h1>
            <a class="btn btn-voltar" href="/config_unidade">‚¨ÖÔ∏è Voltar</a>
        <div>
            <div class="brand">
                <div class="brand-main">
                    <img src="https://infitech.com.br/images/logo.jpg" alt="Infitech - Automa√ß√£o" class="brand-logo">
                    <h2 class="brand-company">Infitech - Automa√ß√£o</h2>
                </div>
                <div class="brand-program">Programa: <strong>MCT-01</strong></div>
            </div>
            <h1>üìã Valores da Unidade</h1>
        
            <div>
            <div class="config-card">
                <h2>üî• Par√¢metros de Combust√£o</h2>
                
                <div class="config-readonly-item">
                    <span class="config-readonly-label">Temperatura:</span>
                    <span class="config-readonly-value">{{TEMPERATURE}}¬∞C</span>
                </div>
                
                <div class="config-readonly-item">
                    <span class="config-readonly-label">Press√£o:</span>
                    <span class="config-readonly-value">{{PRESSURE}} bar</span>
                </div>
                
                <div class="config-readonly-item">
                    <span class="config-readonly-label">Fluxo de Combust√≠vel:</span>
                    <span class="config-readonly-value">{{FUEL_FLOW}} L/h</span>
                </div>
                
                <div class="config-readonly-item">
                    <span class="config-readonly-label">N√≠vel de O‚ÇÇ:</span>
                    <span class="config-readonly-value">{{OXYGEN_LEVEL}}%</span>
                </div>
            </div>
            
            <!-- Card: Status do Sistema -->
            <div class="config-card">
                <h2>‚öôÔ∏è Status do Sistema</h2>
                
                <div class="config-readonly-item">
                    <span class="config-readonly-label">Status Geral:</span>
                    <span class="config-readonly-value">{{SYSTEM_STATUS}}</span>
                </div>
                
                <div class="config-readonly-item">
                    <span class="config-readonly-label">Tempo de Opera√ß√£o:</span>
                    <span class="config-readonly-value">{{OPERATION_TIME}}</span>
                </div>
                
                <div class="config-readonly-item">
                    <span class="config-readonly-label">Alarmes Ativos:</span>
                    <span class="config-readonly-value">{{ACTIVE_ALARMS}}</span>
                </div>
                
                <div class="config-readonly-item">
                    <span class="config-readonly-label">√öltima Manuten√ß√£o:</span>
                    <span class="config-readonly-value">{{LAST_MAINTENANCE}}</span>
                </div>
            </div>
        </div>
        
        <!-- Gr√°fico de Tend√™ncias -->
        <div class="config-container">
            <div class="config-block">
                <h3>üìà Tend√™ncias (√öltimas 24h)</h3>
                
                <div class="info-box">
                    <h4>üìä Resumo das Medi√ß√µes</h4>
                    <ul>
                        <li><strong>Temperatura M√©dia:</strong> {{AVG_TEMPERATURE}}¬∞C</li>
                        <li><strong>Temperatura M√°xima:</strong> {{MAX_TEMPERATURE}}¬∞C</li>
                        <li><strong>Temperatura M√≠nima:</strong> {{MIN_TEMPERATURE}}¬∞C</li>
                        <li><strong>Efici√™ncia M√©dia:</strong> {{AVG_EFFICIENCY}}%</li>
                        <li><strong>Consumo Total:</strong> {{TOTAL_CONSUMPTION}} L</li>
                    </ul>
                </div>
                
                <div class="form-actions">
                    <button class="btn-config btn-primary" onclick="location.reload()">üîÑ Atualizar Valores</button>
                    <button class="btn-config btn-warning" onclick="exportData()">üì§ Exportar Dados</button>
                </div>
            </div>
        </div>
        
        <!-- Configura√ß√µes de Monitoramento -->
        <div class="config-container">
            <div class="config-block">
                <h3>‚öôÔ∏è Configura√ß√µes de Monitoramento</h3>
                
                <form class="config-form" action="/unit_values_save" method="post">
                    <div class="form-group">
                        <label>Intervalo de Coleta (segundos):</label>
                        <input type="number" name="collection_interval" value="{{COLLECTION_INTERVAL}}" min="1" max="3600" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Temperatura de Alarme (¬∞C):</label>
                        <input type="number" name="alarm_temperature" value="{{ALARM_TEMPERATURE}}" min="0" max="1000" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Press√£o de Alarme (bar):</label>
                        <input type="number" name="alarm_pressure" value="{{ALARM_PRESSURE}}" min="0" max="100" step="0.1" required>
                    </div>
                    
                    <div class="form-group">
                        <label>N√≠vel M√≠nimo de O‚ÇÇ (%):</label>
                        <input type="number" name="min_oxygen" value="{{MIN_OXYGEN}}" min="0" max="25" step="0.1" required>
                    </div>
                    
                    <div class="form-actions">
                        <button class="btn-config btn-success" type="submit">üíæ Salvar Configura√ß√µes</button>
                        <button class="btn-config btn-secondary" type="reset">üîÑ Restaurar Valores</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <script src="/js/scripts.js"></script>
    <script>
        // Fun√ß√£o para exportar dados
        function exportData() {
            showToast('Preparando exporta√ß√£o de dados...', 'info');
            
            // Simula√ß√£o de exporta√ß√£o - implementar conforme necess√°rio
            setTimeout(() => {
                const data = {
                    timestamp: new Date().toISOString(),
                    temperature: '{{TEMPERATURE}}',
                    pressure: '{{PRESSURE}}',
                    fuel_flow: '{{FUEL_FLOW}}',
                    oxygen_level: '{{OXYGEN_LEVEL}}',
                    system_status: '{{SYSTEM_STATUS}}'
                };
                
                const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = `medicao_combustao_${new Date().toISOString().split('T')[0]}.json`;
                a.click();
                
                URL.revokeObjectURL(url);
                showToast('Dados exportados com sucesso!', 'success');
            }, 1000);
        }
        
        // Auto-atualiza√ß√£o a cada 30 segundos
        setInterval(() => {
            if (document.visibilityState === 'visible') {
                location.reload();
            }
        }, 30000);
    </script>
</body>
</html>